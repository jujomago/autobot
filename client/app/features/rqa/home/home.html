<div class="rqa-theme">
	<div class="row fixed-margin-bottom-30">
		<div class="pull-left title-container">
			<img src="assets/rqa/images/f9-sm.png">
			<span>Recording QA</span>
		</div>
		<div class="pull-right actions-container">
        	<button class="icon-button fixed-margin-left-10 ">
        		<span class="rqa-icon rqa-refresh"></span>
        	</button>
			<div class="display-inline-block fixed-margin-left-10">
				<button class="icon-button">
					<span class="rqa-icon rqa-reports"></span>
				</button>
				<button class="icon-button" ng-click="$ctrl.switchFilters()" ng-class="{'active': $ctrl.open}">
					<span class="rqa-icon rqa-filter"></span>
				</button>
			</div>
		</div>

	</div>
	<div class="row rqa-body">
	<div class="right-filter" ng-show="$ctrl.open">
			<div class="filters-header">
				<span class="pull-right fa fa-caret-right" ng-click="$ctrl.closeFilters()"></span>
				<h3>Filters</h3>
			</div>
			<hr>
			<div class="filters-body">
				<div class="links-container">
					<div class="pull-left">
						<a href ng-class="{'link-disabled': $ctrl.notUsedFilters.length===0}" uib-popover-template="'filter'" popover-class="abx-popover" popover-trigger="outsideClick" popover-placement="left-top" popover-is-open="$ctrl.openedPopups['default']" ng-click="$ctrl.selectPopover()" abx-auto-placement-popover>Add filter</a>
					</div>
					<div class="pull-right">
						<a href ng-click="$ctrl.removeAllFilters()">Remove All</a>
					</div>
				</div>
				<div class="filters-container">
					<div class="filter-box" uib-popover-template="'date-filter'" popover-class="abx-popover" popover-trigger="outsideClick" popover-placement="left-top" popover-is-open="$ctrl.openedPopups['date']" ng-click="$ctrl.selectDate()" ng-class="{'active': $ctrl.openedPopups['date']}" abx-auto-placement-popover>
						<p class="title">Date</p>
						<p class="value">{{$ctrl.selectedDate.key}}</p>
					</div>
					<div class="filter-box" popover-is-open="$ctrl.openedPopups[filter.key]" ng-class="{'active': $ctrl.openedPopups[filter.key]}" ng-click="$ctrl.selectPopover(filter)" ng-repeat="filter in $ctrl.usedFilters track by $index" uib-popover-template="'filter'" popover-class="abx-popover" popover-trigger="outsideClick" popover-placement="left-top" abx-auto-placement-popover>
						<div class="pull-right close-button" ng-click="$ctrl.removeFilter(filter); $event.stopPropagation();">X</div>
						<p class="title">{{$ctrl.getDisplayName(filter.key)}}</p>
						<p class="value">{{filter.value}}</p>
					</div>
				</div>
			</div>
		</div>
		<div class="left-item">
			<div ng-class="{'filter-open': $ctrl.open}">
			<table class="rqa-table">
				<thead>
					<tr>
						<th ng-repeat="header in $ctrl.headers">
							{{header}}
						</th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="call in $ctrl.calls | filter: $ctrl.getFilters()">
						<td>
							{{call['TIMESTAMP']}}
						</td>
						<td>
							{{call['CUSTOMER NAME']}}
						</td>
						<td>
							{{call['DNIS']}}
						</td>
						<td>
							{{call['AGENT NAME']}}
						</td>
						<td>
							{{call['CAMPAIGN']}}
						</td>
						<td>
							{{call['DISPOSITION']}}
						</td>
						<td>
							{{call['RECORDINGS']}}
						</td>
						<td>
							30
						</td>
					</tr>
				</tbody>
			</table>
			</div>
		</div>
		
	</div>
	
	
</div>




<!--<p>
<div style="width: 100%; text-align: center;">
<button uib-popover-template="'calendar'" popover-class="abx-popover" popover-is-open="true" popover-placement="right" type="button" class="btn btn-default">Mouseenter</button>
</p>
<input type="text" value="Click me!" uib-popover="I appeared on focus! Click away and I'll vanish..."  popover-trigger="focus" class="form-control">
</div>
-->
<!-- POPUP TEMPLATES -->
<script id="filter" type="text/ng-template">
    <form name="filterForm" ng-submit="filterForm.$valid && $ctrl.applyFilter($ctrl.selectedPopover)" novalidate>
	    <div class="form-group filter-popup">
	    	<label>Filter</label>
	    	<select ng-options="$ctrl.getDisplayName(item.key) for item in $ctrl.availablesFilters" ng-model="$ctrl.selectedOption">
	    	</select>
	    	<label>Value</label>
	    	<input type="text" autofocus="" ng-model="$ctrl.selectedValue" name="value" required>
	    	<div ng-messages="filterForm.value.$error" ng-show="filterForm.$submitted">                  
		        <p ng-message="required">This field is required</p>
		    </div> 
	    	<div class="button-container">
	    		<button class="btn btn-blue" type="submit">Apply</button>
	    	</div>
	    </div>
    </form>
 </script>
 <script id="date-filter" type="text/ng-template">
    <form name="dateFilterForm" ng-submit="dateFilterForm.$valid && $ctrl.applyDate()" novalidate>
	    <div class="form-group filter-popup">
	    	<label>Filter</label>
	    	<select ng-options="item.key for item in $ctrl.dates" ng-model="$ctrl.tmpSelectedDate">
	    	</select>
		    <div class="button-container">
		    		<button class="btn btn-blue" type="submit">Apply</button>
		    </div>
	    </div>
    </form>
 </script>