


<h3 class="title_section">List: <span>{{::$ctrl.list.name}}</span></h3>


<abx-message msg="$ctrl.message"></abx-message> 


<abx-load-indicator ng-hide="$ctrl.found"></abx-load-indicator> 
<abx-load-indicator ng-show="$ctrl.confirm"></abx-load-indicator> 
<div ng-show="$ctrl.found && !$ctrl.confirm">
	<div ng-show="$ctrl.homeSelected">
	    <div class="pull-left">{{$ctrl.list.size}} records registered</div>
	    <div class="pull-right">
	        <button ng-click="$ctrl.selectUpdate()">Update</button>
	        <button ng-click="$ctrl.selectDelete()">Remove</button>
	    </div>
    </div>
    <div class="pull-right" ng-hide="$ctrl.homeSelected">
    	<button ng-click="$ctrl.selectHome()">Cancel</button>
    </div> 
    <div ng-show="$ctrl.deleteSelected || $ctrl.updateSelected">
		<div ng-show="$ctrl.deleteSelected">
			<b>List Delete</b><br>
			<p>Select how would you want to delete your list records</p>
	  	</div>
	  	<div ng-show="$ctrl.updateSelected">
			<b>List update</b><br>
			<p>Select how would you like to update the list</p>
	  	</div>
	  	<a ng-click="$ctrl.advancedOptions.isCollapsed = !$ctrl.advancedOptions.isCollapsed"><i class="pull-left glyphicon" ng-class="{'glyphicon-chevron-down': $ctrl.advancedOptions.isCollapsed, 'glyphicon-chevron-right': !$ctrl.advancedOptions.isCollapsed}"></i> Advanced Options</a>
		<div uib-collapse="$ctrl.advancedOptions.isCollapsed">
			<div class="well" ng-show="$ctrl.deleteSelected">
				<b>Options for list delete:</b>
	           	<div>
       				<input type="radio" ng-model="$ctrl.listDeleteSettings.listDeleteMode" value='DELETE_ALL'> Remove all matching records from list
	            </div>
	            <div>
      				 <input type="radio" ng-model="$ctrl.listDeleteSettings.listDeleteMode" value='DELETE_EXCEPT_FIRST'> Remove all matching list records And Add first (oldest) matching Contact Record to list
	            </div>
			</div>
			<div class="well" ng-show="$ctrl.updateSelected">
				<b>Options for list update:</b>
	           	<div>
       				<input type="radio" ng-model="$ctrl.listUpdateSettings.listAddMode" value='ADD_FIRST'> Add first (oldest) matching Contact Record to the list
	            </div>
	            <div>
      				 <input type="radio" ng-model="$ctrl.listUpdateSettings.listAddMode" value='ADD_ALL'> Add all matching Contact Records (in case of multiple records) to the list
	            </div>
	            <div>
      				 <input type="radio" ng-model="$ctrl.listUpdateSettings.listAddMode" value='ADD_IF_SOLE_CRM_MATCH'> Skip list record if multiple matches are found in Contact
	            </div>
	            <div>
      				 <input type="checkbox" ng-model="$ctrl.listUpdateSettings.cleanListBeforeUpdate"> Delete all list records before update. Warning: some reporting data will be lost
	            </div>
	            <hr>
	            <div>
      				 <input type="checkbox" ng-model="$ctrl.listUpdateSettings.crmAddMode" ng-false-value="'DONT_ADD'"  ng-true-value="'ADD_NEW'"> Add new record if matching key is not found in contacts
	            </div>
	            <div>
      				 <input type="checkbox" ng-model="$ctrl.updateRecords" ng-change="$ctrl.setUpdateValue()"> Update existing contact record(s) with matching key
	            </div>
	            <div>
      				 <input type="radio" ng-disabled="!$ctrl.updateRecords" ng-model="$ctrl.listUpdateSettings.crmUpdateMode" value='UPDATE_FIRST'> First (oldest) matching record
	            </div>
	            <div>
      				 <input type="radio" ng-disabled="!$ctrl.updateRecords" ng-model="$ctrl.listUpdateSettings.crmUpdateMode" value='UPDATE_ALL'> All matching records (in case of multiple matches)
	            </div>
	            <div>
      				 <input type="radio" ng-disabled="!$ctrl.updateRecords" ng-model="$ctrl.listUpdateSettings.crmUpdateMode" value='UPDATE_SOLE_MATCHES'> Only if single match in contacts
	            </div>
			</div>
		</div>
		<div ng-show="$ctrl.optionButtons" class="settings-container">
			<button ng-click="$ctrl.nextStep()">Import records manually</button>
			<button ng-click="$ctrl.displayFileField()" 
			>Import source file</button>
		</div>
		<div ng-show="$ctrl.fileSelected" class="settings-container">
			<input type="file" abx-read-file="$ctrl.csvFile">
			<p ng-show="!$ctrl.csvFile && $ctrl.sent" class="file-empty-error">This field is required</p>
			<div class="settings-container">
				<button ng-click="$ctrl.displayButtons()">Back</button>
				<button ng-click="$ctrl.sendFile()">Next</button>
			</div>
		</div>
    </div>         
</div>

 
 

