<h4 ng-hide="$ctrl.found" class="text-center"><span class="label label-success">Loading ...</span></h4>

<div class="well well-sm">
    <a ui-sref="skills.list">
        &lt&lt Back to List
    </a>
</div>

<uib-tabset active="active1" justified="false" ng-hide="!$ctrl.found">
    <uib-tab index="0" heading="Skill" select="$ctrl.showSkill()">
        <div ng-show="$ctrl.found">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <strong>Editing:  {{::$ctrl.selectedSkill.name}}</strong>
                </div>
                <div class="panel-body">
                    <form class="form-horizontal" ng-submit="$ctrl.save()">
                        <div class="form-group">
                            <label for="inputName" class="control-label col-xs-2">Name</label>
                            <div class="col-xs-10">
                                <input type="text" class="form-control" id="inputName" ng-model="$ctrl.selectedSkill.name">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="inputDesc" class="control-label col-xs-2">Description</label>
                            <div class="col-xs-10">
                                <textarea id="inputDesc" class="form-control" ng-model="$ctrl.selectedSkill.description"></textarea>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="inputMessage" class="control-label col-xs-2">Message of the Day</label>
                            <div class="col-xs-10">
                                <input type="text" class="form-control" id="inputMessage" ng-model="$ctrl.selectedSkill.messageOfTheDay">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-xs-2">Route Voice Mails</label>
                            <!--pre>{{radioModel || 'null'}}</pre-->
                            <div class="col-xs-10">
                                <label class="btn btn-primary" ng-model="$ctrl.selectedSkill.routeVoiceMails" uib-btn-radio="true">True</label>
                                <label class="btn btn-primary" ng-model="$ctrl.selectedSkill.routeVoiceMails" uib-btn-radio="false">False</label>

                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-xs-offset-2 col-xs-10">
                                <button type="submit" class="btn btn-success" ng-disabled="$ctrl.SubmitText=='Saving...'">{{$ctrl.SubmitText}}</button>
                                <button type="submit" class="btn btn-warning" ng-click="$ctrl.cancel()">Cancel</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </uib-tab>
    <uib-tab index="1" heading="Users" select="$ctrl.listUsers()">

        <p>
            <label>Assign Users for this Skill:</label>{{::$ctrl.selectedSkill.name}}
        </p>
        
        
        <div class="alert alert-{{$ctrl.message.type}}" role="alert" ng-show="$ctrl.message.show">
            <p ng-bind-html="$ctrl.message.text"></p>   
        </div>
        <div class="row">
            <div class="col-xs-3">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <strong>Users Assigned</strong>
                    </div>

                    <div class="btn-group-vertical userNamesList" role="group">
                        <div class="btn-group"  uib-dropdown ng-repeat="user in $ctrl.UsersNamesSkills">
                            <button id="button{{user.id}}" type="button" class="btn btn-default" uib-dropdown-toggle ng-class="{'btn-info' : $ctrl.toggleUsernameLink == $index}" 
                            ng-disabled="$ctrl.toggleUserNameItem==$index">
                                {{($ctrl.toggleUserNameItem!=$index)?user.userName:user.userName+'(DELETING)'}} <span class="caret"></span>
                            </button>
                            <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="button{{user.id}}">
                                <li role="menuitem">
                                    <a href="#" ng-click="$ctrl.showUserInfo(user.userName,$index)">Get Detail UserName</a></li>
                                <li class="divider"></li>
                                <li role="menuitem">
                                    <a href="#" ng-click="$ctrl.deleteUserfromSkill(user,$index)">Remove UserName</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="listaUsers col-xs-9">
                <h4 ng-show="$ctrl.filteredUsers.length===0">
                    <label class="label label-info">Loading Users...</label>
                </h4>
                <div class="panel panel-info" ng-show="$ctrl.filteredUsers.length>0">
                    <div class="panel-heading">
                        <strong>Users UnAssigned</strong>
                    </div>
                    <table class="table table-striped table-bordered table-hover">
                        <thead>
                            <th>UserName</th>
                            <th>FirstName</th>
                            <th>LastName</th>
                            <th>FullName</th>
                            <th>Email</th>
                            <th>Assign</th>
                        </thead>
                        <tbody>
                            <tr ng-repeat="useritem  in $ctrl.filteredUsers | limitTo:$ctrl.numPerPage:$ctrl.beginNext" ng-class="{'success' : $ctrl.toggleUserItem.item == $index}">
                                <td>{{useritem.userName}}</td>
                                <td>{{useritem.firstName}}</td>
                                <td>{{useritem.lastName}}</td>
                                <td>{{useritem.fullName}}</td>
                                <td>{{useritem.EMail}}</td>
                                <td>
                                    <button class="btn btn-success" ng-click="$ctrl.addUsertoSkill(useritem,$index)" ng-disabled="$ctrl.toggleUserItem.item==$index">
                                        {{($ctrl.toggleUserItem.item==$index)?'Assigning..':'Add'}}
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <uib-pagination ng-show="$ctrl.filteredUsers.length>0" total-items="$ctrl.filteredUsers.length" ng-model="$ctrl.currentPage"
                items-per-page="$ctrl.numPerPage" boundary-links="true" ng-change="$ctrl.pageChanged()">
                </uib-pagination>

            </div>
        </div>
        <div class="panel panel-info" ng-show="$ctrl.showPanelInfo">
            <div class="panel-heading">
                <strong>User Selected Info</strong>
            </div>
            <div class="panel-body" ng-show="!$ctrl.DetailUser.firstName">
                    <h4><label class="label label-info">
                    Loading User Information
                    </label>
                    </h4>
            </div>
            <table ng-show="$ctrl.DetailUser.firstName" class="table">
                    <thead>
                        <th>FirstName</th>
                        <th>LastName</th>
                        <th>FullName</th>
                        <th>Email</th>                                
                    </thead>
                    <tbody>
                        <td>{{$ctrl.DetailUser.firstName}}</td>
                        <td>{{$ctrl.DetailUser.lastName}}</td>
                        <td>{{$ctrl.DetailUser.fullName}}</td>
                        <td>{{$ctrl.DetailUser.EMail}}</td>
                    </tbody>                            
                </table>
        </div>
    </uib-tab>
</uib-tabset>