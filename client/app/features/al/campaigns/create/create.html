<div class="well well-sm">
    <a ui-sref="campaigns.list">
        &lt&lt Back to List
    </a>
</div>

<abx-message msg="$ctrl.message"/>

<div class="panel panel-default">
    <div class="panel-heading">
        <strong>Create New Campaign</strong>
    </div>
    <div class="panel-body">
        <form  name="formCampaign" novalidate class="form-horizontal" ng-submit="formCampaign.$valid && $ctrl.save()">
            <div class="form-group" ng-class="{ 'has-error': formCampaign.campaignName.$invalid && formCampaign.$submitted }">
                <label class="control-label col-xs-3">Name (*)</label>
                <div class="col-xs-9">
                    <input type="text" class="form-control" ng-model="$ctrl.newCampaign.name" name="campaignName" required ng-minlength="5">
                    <div ng-messages="formCampaign.campaignName.$error" ng-show="formCampaign.$submitted">
                        <p ng-message="minlength">This field is too short</p>
                        <p ng-message="required">This field is required</p>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-xs-3">Description</label>
                <div class="col-xs-9">
                    <textarea  class="form-control" ng-model="$ctrl.newCampaign.description"></textarea>
                </div>
            </div>
            <div class="form-group">
                <label for="inputDesc" class="control-label col-xs-3">Type</label>
                <div class="col-xs-3">
                    <div class="radio">
                        <label>
                            <input type="radio" ng-model="$ctrl.newCampaign.type" value="outbound" ng-change="$ctrl.checkRadio()"> OutBound
                        </label>
                    </div>
                </div>
                <div class="col-xs-3">
                    <div class="radio">
                        <label>
                            <input type="radio" ng-model="$ctrl.newCampaign.type" value="inbound" ng-change="$ctrl.checkRadio()"> InBound
                        </label>
                    </div>
                </div>      
                <div class="col-xs-3">
                    <div class="radio">
                        <label>
                            <input type="radio" ng-model="$ctrl.newCampaign.type" value="autodial" ng-change="$ctrl.checkRadio()"> Autodial
                        </label>
                    </div>
                </div>
            </div>
            <div class="form-group" ng-if="$ctrl.newCampaign.type!=='outbound'"  ng-class="{ 'has-error': formCampaign.campaignIVR.$invalid && formCampaign.$submitted }">
                <label for="inputMessage" class="control-label col-xs-3">Default IVR Script (*)</label>
                <div class="col-xs-9">
                    <h4 ng-hide="$ctrl.loadingIVR===false" class="text-center"><span class="label label-success">Loading IVRScripts...</span></h4>
                    <select  ng-show="$ctrl.loadingIVR===false" name="campaignIVR"  class="form-control"  ng-options="o.name for o in $ctrl.ivrScripts track by o.name"
                        ng-model="$ctrl.newCampaign.ivrscript" required></select>
                    <div ng-messages="formCampaign.campaignIVR.$error" ng-show="formCampaign.$submitted">
                        <p ng-message="required">This field is required</p>
                    </div>                

                </div>
            </div>
           <div class="form-group">
                <div class="col-xs-offset-2 col-xs-10 text-right">
                    <button type="submit" class="btn btn-success" ng-disabled="$ctrl.SubmitText=='Saving...'">{{$ctrl.SubmitText}}</button>
                    <button type="button" class="btn btn-warning" ui-sref="campaigns.list">Cancel</button>
                </div>
            </div>
        </form>
    </div>
</div>